<html>
  <head>
    <!-- link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.css" -->
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
     <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
     <script>
         
     </script>
    
  </head>
  <body>
      HAHAHA
    <div id="map" style="width: 100%; height: 100%"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.js"></script>
    <script>
      // get var from Flask and convert to JS
      var schools = '{{ schools }}';
                    
      var mymap = L.map('map').setView([40.706213526877455, -74.0044641494751], 15);
      L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', 
                  { maxZoom: 18, 
                   attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>'
      }).addTo(mymap);

        // It even opens up a popup when you click it!
        L.marker([40.712, -74.006]).addTo(mymap)
          .bindPopup("<strong>Henry Street School</strong>").openPopup();
                    
    alert(schools.length);
    
       
    {% for school in schools %}
        L.marker([{{ school.latitude }}, {{ school.longitude }}]).addTo(mymap)
            .bindPopup("<strong>{{ school.school_name }}</strong>").openPopup();
    {% endfor %}
    
                    
    </script>
    
    <hr>
    
    <ul>
    {% for school in schools %}
        <p>{{ school.school_name }}</p>
    {% endfor %}
</ul>
  </body>
</html>